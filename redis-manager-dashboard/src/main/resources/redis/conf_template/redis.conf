# RDB文件默认名称,默认dump-{port}.rdb
dbfilename dump.rdb
# redis 密码
requirepass
# master 密码
masterauth
#
cluster-announce-ip
#
unixsocket
# redis log 文件
logfile
#
pidfile ./redis_{port}.pid
#
slave-announce-ip
# 当前实例最大可用内存
maxmemory 10240mb
#
proto-max-bulk-len 536870912
#
client-query-buffer-limit 1073741824
#
maxmemory-samples 5
#
lfu-log-factor 10
#
lfu-decay-time 1
# 客户端闲置多少秒后关闭连接,默认为0,永不关闭
timeout 60
#
active-defrag-threshold-lower 10
#
active-defrag-threshold-upper 100
#
active-defrag-ignore-bytes 104857600
#
active-defrag-cycle-min 25
#
active-defrag-cycle-max 75
# Redis重写aof文件的比例条件,默认从100开始,统一机器下不同实例按4%递减
auto-aof-rewrite-percentage 100
# 触发rewrite的aof文件最小阀值,默认64mb
auto-aof-rewrite-min-size 64mb
# hash数据结构优化参数
hash-max-ziplist-entries 512
# hash数据结构优化参数
hash-max-ziplist-value 64
#
list-max-ziplist-size -2
#
list-compress-depth 0
# set数据结构优化参数
set-max-intset-entries 512
# zset数据结构优化参数
zset-max-ziplist-entries 128
# zset数据结构优化参数
zset-max-ziplist-value 64
# HyperLogLog稀疏表示限制设置
hll-sparse-max-bytes 3000
# Lua脚本最长的执行时间，单位为毫秒
lua-time-limit 5000
# 慢查询被记录的阀值,默认10毫秒
slowlog-log-slower-than 10000
#
latency-monitor-threshold 0
# 最多记录慢查询的条数
slowlog-max-len 500
# 端口
port {port}
#
cluster-announce-port 0
#
cluster-announce-bus-port 0
#
tcp-backlog 511
# 可用的数据库数，默认值为16个,默认数据库为0
databases 16
# 指定slave定期ping master的周期,默认:10秒
repl-ping-slave-period 10
# master批量数据传输时间或者ping回复时间间隔,默认:60秒
repl-timeout 60
# 复制缓存区,默认:1mb,配置为:10mb
repl-backlog-size 10mb
# master在没有slave的情况下释放BACKLOG的时间多久:默认:3600,配置为:7200
repl-backlog-ttl 3600
# 客户端最大连接数
maxclients 10000
#
watchdog-period 0
# slave的优先级,影响sentinel/cluster晋升master操作,0永远不晋升
slave-priority 100
#
slave-announce-port 0
# 当slave数量小于min-slaves-to-write，且延迟小于等于min-slaves-max-lag时， master停止写入操作
min-slaves-to-write 0
# 当slave服务器和master服务器失去连接后，或者当数据正在复制传输的时候，如果此参数值设置yes，slave服务器可以继续接受客户端的请求
min-slaves-max-lag 10
# 执行后台task数量,默认:10
hz 10
# 集群节点超时时间,默认15秒
cluster-node-timeout 15000
# 主从迁移至少需要的从节点数,默认1个
cluster-migration-barrier 1
# 从节点延迟有效性判断因子,默认10秒
cluster-slave-validity-factor 10
# 无盘复制延时
repl-diskless-sync-delay 5
# 检测客户端是否健康周期,默认关闭
tcp-keepalive 300
# 节点部分失败期间,其他节点是否继续工作
cluster-require-full-coverage yes
#
cluster-slave-no-failover no
# 是否在后台aof文件rewrite期间调用fsync,默认调用,修改为yes,防止可能fsync阻塞,但可能丢失rewrite期间的数据
no-appendfsync-on-rewrite no
# 当slave服务器和master服务器失去连接后，或者当数据正在复制传输的时候，如果此参数值设置
slave-serve-stale-data yes
# slave服务器节点是否只读,cluster的slave节点默认读写都不可用,需要调用readonly开启可读模式
slave-read-only yes
# bgsave出错了不停写
stop-writes-on-bgsave-error yes
# 是否守护进程, 默认no
daemonize no
# rdb是否压缩
rdbcompression yes
# rdb校验和
rdbchecksum yes
# 是否激活重置哈希,默认:yes
activerehashing yes
# 自动内存碎片整理, 默认no
activedefrag no
#
protected-mode yes
# 是否禁用socket的NO_DELAY,默认关闭，影响主从延迟
repl-disable-tcp-nodelay no
# 开启无盘复制
repl-diskless-sync no
# aof rewrite过程中,是否采取增量文件同步策略,默认:yes
aof-rewrite-incremental-fsync yes
# 加载aof文件时，是否忽略aof文件不完整的情况，是否Redis正常启动
aof-load-truncated yes
#
aof-use-rdb-preamble no
#
lazyfree-lazy-eviction no
#
lazyfree-lazy-expire no
#
lazyfree-lazy-server-del no
#
slave-lazy-flush no
# 内存不够时,淘汰策略,默认:volatile-lru
maxmemory-policy noeviction
# 日志级别
loglevel notice
#
supervised no
# 默认:aof每秒同步一次
appendfsync everysec
#
syslog-facility local0
# 开启append only持久化模式
appendonly no
# 工作目录
dir {dir}
# 900秒有一次修改做bgsave
save 900 1
# 300秒有10次修改做bgsave
save 300 10
# 60秒有10000次修改做bgsave
save 60 10000
# 客户端输出缓冲区限制(客户端)
client-output-buffer-limit normal
# 客户端输出缓冲区限制(复制)
client-output-buffer-limit slave 268435456 67108864 60
# 客户端输出缓冲区限制(发布订阅)
client-output-buffer-limit pubsub 33554432 8388608 60
#
unixsocketperm 0
#
slaveof
#
notify-keyspace-events
#
bind 127.0.0.1